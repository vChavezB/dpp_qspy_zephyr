name: Compile Verification

on:
  push:
    branches: [ actions ]
jobs:
    build:
        runs-on: ubuntu-latest
        container: nordicplayground/nrfconnect-sdk:main
        steps:
        - name: Pull project
          run: git clone https://github.com/vChavezB/dpp_qspy_zephyr --recurse-submodels
        - name: Build
          working-directory: qpcpp/examples/esp-idf/dpp-esp-idf
          run: |         
              mkdir west_workspace
              cd workspace
              west init -m https://github.com/nrfconnect/sdk-nrf/
              west update --narrow -o=--depth=1
              west build ../dpp_qspy_zephyr --board nrf52833dk_nrf52833
        - name: Upload binary
          uses: actions/upload-artifact@v3
          with:
            name: dpp-binary
            path: ~/build/
